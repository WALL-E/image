#!/bin/bash

role=`id -u`
if test $role -ne 0
then
    echo "运行脚本需要root权限"
    exit 1
fi

cd `dirname $0`

yum install -y epel-release
yum install -y python-virtualenv
yum install -y sqlite-devel sqlite
yum install -y gcc gcc-c++ automake
# yum groupinstall -y 'development tools'
yum install -y zlib-devel bzip2-devel openssl-devel xz-libs wget
yum install -y readline-devel readline
yum install -y mariadb-server mariadb-devel mariadb

wget http://opduyrvvz.bkt.clouddn.com/Python-3.6.0.tgz
tar zxvf Python-3.6.0.tgz
cd Python-3.6.0
./configure --prefix=/usr/local --enable-shared
make && make install && make libinstall
cd -
rm -fr Python-3.6.0

# ln -s /usr/local/bin/python3.6 /usr/bin/python3.6

wget http://opduyrvvz.bkt.clouddn.com/setuptools-36.0.1.zip
unzip setuptools-36.0.1.zip
cd setuptools-36.0.1
python3.6 setup.py install
cd -
rm -fr setuptools-36.0.1

echo "/usr/local/lib" > /etc/ld.so.conf.d/python-3.6.conf
ldconfig

easy_install-3.6 pip

pip3.6 install mysqlclient
pip3.6 install Django==1.11.4
pip3.6 install djangorestframework
pip3.6 install markdown       # Markdown support for the browsable API.
pip3.6 install django-filter  # Filtering support
